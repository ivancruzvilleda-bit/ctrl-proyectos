<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ProjectHub — Acceso</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0e1a;
    --surface: #111827;
    --surface2: #1a2236;
    --border: rgba(255,255,255,0.08);
    --accent: #00e5a0;
    --accent2: #0099ff;
    --text: #f0f4ff;
    --muted: #6b7a99;
    --error: #ff4d6d;
    --success: #00e5a0;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
  }

  /* Fondo animado */
  .bg-grid {
    position: fixed; inset: 0; z-index: 0;
    background-image:
      linear-gradient(rgba(0,229,160,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,229,160,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    animation: gridMove 20s linear infinite;
  }
  @keyframes gridMove { to { background-position: 40px 40px; } }

  .blob {
    position: fixed; border-radius: 50%; filter: blur(80px); opacity: 0.15; z-index: 0; animation: float 8s ease-in-out infinite;
  }
  .blob-1 { width: 500px; height: 500px; background: var(--accent); top: -150px; right: -100px; animation-delay: 0s; }
  .blob-2 { width: 400px; height: 400px; background: var(--accent2); bottom: -100px; left: -100px; animation-delay: 3s; }
  @keyframes float { 0%,100%{transform:translate(0,0) scale(1)} 50%{transform:translate(20px,-20px) scale(1.05)} }

  /* Layout principal */
  .layout {
    display: grid;
    grid-template-columns: 1fr 480px;
    width: min(100%, 1100px);
    min-height: 100vh;
    position: relative; z-index: 1;
  }

  /* Panel izquierdo - branding */
  .brand-panel {
    display: flex; flex-direction: column; justify-content: center; padding: 60px;
    animation: fadeInLeft 0.8s ease both;
  }
  @keyframes fadeInLeft { from{opacity:0;transform:translateX(-30px)} to{opacity:1;transform:translateX(0)} }

  .logo {
    display: flex; align-items: center; gap: 12px; margin-bottom: 80px;
  }
  .logo-icon {
    width: 44px; height: 44px; background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 12px; display: flex; align-items: center; justify-content: center;
    font-size: 20px; font-weight: 800; color: #0a0e1a; font-family: 'Syne', sans-serif;
  }
  .logo-name { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 700; letter-spacing: -0.5px; }
  .logo-name span { color: var(--accent); }

  .brand-headline {
    font-family: 'Syne', sans-serif; font-size: clamp(36px, 4vw, 52px);
    font-weight: 800; line-height: 1.1; letter-spacing: -2px; margin-bottom: 24px;
  }
  .brand-headline em { font-style: normal; color: var(--accent); }

  .brand-sub { color: var(--muted); font-size: 17px; line-height: 1.7; max-width: 420px; margin-bottom: 60px; }

  .stats { display: flex; gap: 40px; }
  .stat { }
  .stat-num { font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 800; color: var(--accent); }
  .stat-label { font-size: 13px; color: var(--muted); margin-top: 2px; }

  /* Panel derecho - formulario */
  .form-panel {
    background: var(--surface);
    border-left: 1px solid var(--border);
    display: flex; flex-direction: column; justify-content: center; padding: 60px 48px;
    animation: fadeInRight 0.8s ease both;
  }
  @keyframes fadeInRight { from{opacity:0;transform:translateX(30px)} to{opacity:1;transform:translateX(0)} }

  /* Tabs de vistas */
  .screen { display: none; animation: fadeUp 0.4s ease both; }
  .screen.active { display: block; }
  @keyframes fadeUp { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }

  .screen-title {
    font-family: 'Syne', sans-serif; font-size: 26px; font-weight: 800;
    letter-spacing: -0.5px; margin-bottom: 8px;
  }
  .screen-sub { color: var(--muted); font-size: 14px; margin-bottom: 36px; line-height: 1.6; }

  /* Formulario */
  .field { margin-bottom: 20px; }
  .field label { display: block; font-size: 13px; font-weight: 500; color: var(--muted); margin-bottom: 8px; letter-spacing: 0.3px; text-transform: uppercase; }

  .input-wrap { position: relative; }
  .input-wrap svg { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--muted); pointer-events: none; }

  input[type="text"], input[type="email"], input[type="password"] {
    width: 100%; padding: 14px 14px 14px 44px;
    background: var(--surface2); border: 1.5px solid var(--border);
    border-radius: 10px; color: var(--text); font-family: 'DM Sans', sans-serif;
    font-size: 15px; transition: border-color 0.2s, box-shadow 0.2s;
    outline: none;
  }
  input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,229,160,0.1); }
  input::placeholder { color: var(--muted); }
  input.error { border-color: var(--error); }

  .field-error { color: var(--error); font-size: 12px; margin-top: 6px; display: none; }
  .field-error.show { display: block; }

  /* Toggle password */
  .toggle-pass {
    position: absolute; right: 14px; top: 50%; transform: translateY(-50%);
    background: none; border: none; cursor: pointer; color: var(--muted);
    transition: color 0.2s; padding: 0;
  }
  .toggle-pass:hover { color: var(--text); }

  /* Opciones login */
  .login-opts {
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 28px;
  }
  .remember { display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 14px; color: var(--muted); }
  .remember input[type="checkbox"] { appearance: none; width: 16px; height: 16px; border: 1.5px solid var(--border); border-radius: 4px; background: var(--surface2); cursor: pointer; transition: all 0.2s; flex-shrink: 0; }
  .remember input[type="checkbox"]:checked { background: var(--accent); border-color: var(--accent); background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='8' viewBox='0 0 10 8'%3E%3Cpath d='M1 4l3 3 5-6' stroke='%230a0e1a' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: center; }

  .link-btn { background: none; border: none; cursor: pointer; color: var(--accent); font-size: 14px; font-family: 'DM Sans', sans-serif; padding: 0; text-decoration: none; transition: opacity 0.2s; }
  .link-btn:hover { opacity: 0.75; }

  /* Botón principal */
  .btn-primary {
    width: 100%; padding: 15px; background: linear-gradient(135deg, var(--accent), #00c97a);
    color: #0a0e1a; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 16px;
    border: none; border-radius: 10px; cursor: pointer; letter-spacing: 0.3px;
    transition: transform 0.15s, box-shadow 0.15s, opacity 0.15s;
    position: relative; overflow: hidden;
  }
  .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 8px 24px rgba(0,229,160,0.3); }
  .btn-primary:active { transform: translateY(0); }
  .btn-primary.loading { opacity: 0.7; pointer-events: none; }
  .btn-primary .spinner { display: none; width: 18px; height: 18px; border: 2px solid rgba(10,14,26,0.3); border-top-color: #0a0e1a; border-radius: 50%; animation: spin 0.7s linear infinite; margin: 0 auto; }
  .btn-primary.loading .btn-text { display: none; }
  .btn-primary.loading .spinner { display: block; }
  @keyframes spin { to { transform: rotate(360deg); } }

  .btn-secondary {
    background: none; border: 1.5px solid var(--border); color: var(--text);
    width: 100%; padding: 14px; border-radius: 10px; font-family: 'DM Sans', sans-serif;
    font-size: 15px; cursor: pointer; transition: border-color 0.2s, background 0.2s; margin-top: 12px;
  }
  .btn-secondary:hover { border-color: var(--accent); background: rgba(0,229,160,0.05); }

  /* Alerta */
  .alert {
    padding: 12px 16px; border-radius: 8px; font-size: 14px; margin-bottom: 20px;
    display: none; align-items: center; gap: 10px;
  }
  .alert.show { display: flex; animation: fadeUp 0.3s ease both; }
  .alert-success { background: rgba(0,229,160,0.1); border: 1px solid rgba(0,229,160,0.25); color: var(--success); }
  .alert-error { background: rgba(255,77,109,0.1); border: 1px solid rgba(255,77,109,0.25); color: var(--error); }
  .alert-info { background: rgba(0,153,255,0.1); border: 1px solid rgba(0,153,255,0.25); color: var(--accent2); }

  /* Divisor */
  .divider { display: flex; align-items: center; gap: 14px; margin: 24px 0; }
  .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
  .divider span { color: var(--muted); font-size: 13px; white-space: nowrap; }

  /* Back link */
  .back-btn { display: flex; align-items: center; gap: 6px; color: var(--muted); font-size: 14px; background: none; border: none; cursor: pointer; padding: 0; font-family: 'DM Sans', sans-serif; transition: color 0.2s; margin-bottom: 32px; }
  .back-btn:hover { color: var(--text); }

  /* Pasos recuperación */
  .steps { display: flex; gap: 8px; margin-bottom: 32px; }
  .step { flex: 1; height: 3px; border-radius: 99px; background: var(--border); transition: background 0.4s; }
  .step.done { background: var(--accent); }
  .step.active { background: linear-gradient(90deg, var(--accent), var(--accent2)); }

  /* Código OTP */
  .otp-wrap { display: flex; gap: 10px; justify-content: center; margin: 24px 0; }
  .otp-input {
    width: 52px; height: 60px; text-align: center; font-size: 24px; font-weight: 700;
    font-family: 'Syne', sans-serif; background: var(--surface2); border: 1.5px solid var(--border);
    border-radius: 10px; color: var(--text); outline: none; transition: border-color 0.2s, box-shadow 0.2s;
  }
  .otp-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,229,160,0.1); }

  .resend { text-align: center; font-size: 14px; color: var(--muted); margin-top: 16px; }
  .resend button { background: none; border: none; color: var(--accent); cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: 14px; }

  /* Medidor de fortaleza de contraseña */
  .pwd-strength { margin-top: 10px; }
  .pwd-bar { display: flex; gap: 4px; margin-bottom: 6px; }
  .pwd-seg { flex: 1; height: 3px; border-radius: 99px; background: var(--border); transition: background 0.3s; }
  .pwd-label { font-size: 12px; color: var(--muted); }

  /* Responsive */
  @media (max-width: 768px) {
    .layout { grid-template-columns: 1fr; }
    .brand-panel { display: none; }
    .form-panel { padding: 40px 28px; min-height: 100vh; border-left: none; }
  }
</style>
</head>
<body>
<div class="bg-grid"></div>
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>

<div class="layout">
  <!-- Panel de marca -->
  <div class="brand-panel">
    <div class="logo">
      <div class="logo-icon">PH</div>
      <div class="logo-name">Project<span>Hub</span></div>
    </div>
    <h1 class="brand-headline">
      Gestiona proyectos<br>con <em>precisión</em><br>y velocidad.
    </h1>
    <p class="brand-sub">
      Una plataforma centralizada para que tus equipos colaboren, 
      prioricen tareas y entreguen resultados a tiempo — siempre.
    </p>
    <div class="stats">
      <div class="stat">
        <div class="stat-num">2.4k+</div>
        <div class="stat-label">Proyectos activos</div>
      </div>
      <div class="stat">
        <div class="stat-num">98%</div>
        <div class="stat-label">Entregas a tiempo</div>
      </div>
      <div class="stat">
        <div class="stat-num">340+</div>
        <div class="stat-label">Equipos</div>
      </div>
    </div>
  </div>

  <!-- Panel de formulario -->
  <div class="form-panel">

    <!-- ===== PANTALLA: LOGIN ===== -->
    <div class="screen active" id="screen-login">
      <h2 class="screen-title">Bienvenido de vuelta</h2>
      <p class="screen-sub">Ingresa tus credenciales para acceder a tu espacio de trabajo.</p>

      <div class="alert alert-error" id="login-error">
        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="8" x2="12" y2="12" stroke-width="2"/><line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2.5"/></svg>
        <span id="login-error-msg">Usuario o contraseña incorrectos.</span>
      </div>

      <div class="field">
        <label>Usuario o correo</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
          <input type="text" id="login-user" placeholder="tu@empresa.com" autocomplete="username">
        </div>
        <div class="field-error" id="login-user-err">Por favor ingresa tu usuario o correo.</div>
      </div>

      <div class="field">
        <label>Contraseña</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><rect x="3" y="11" width="18" height="11" rx="2" stroke-width="2"/><path d="M7 11V7a5 5 0 0110 0v4" stroke-width="2" stroke-linecap="round"/></svg>
          <input type="password" id="login-pass" placeholder="••••••••" autocomplete="current-password">
          <button class="toggle-pass" onclick="togglePass('login-pass', this)" type="button">
            <svg id="eye-login" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke-width="2"/></svg>
          </button>
        </div>
        <div class="field-error" id="login-pass-err">Por favor ingresa tu contraseña.</div>
      </div>

      <div class="login-opts">
        <label class="remember">
          <input type="checkbox" id="remember-me"> Recordar sesión
        </label>
        <button class="link-btn" onclick="goTo('screen-forgot-email')">¿Olvidaste tu contraseña?</button>
      </div>

      <button class="btn-primary" onclick="handleLogin()">
        <span class="btn-text">Iniciar sesión</span>
        <div class="spinner"></div>
      </button>

      <div class="divider"><span>¿No tienes cuenta?</span></div>
      <button class="btn-secondary" onclick="goTo('screen-register')">Crear cuenta nueva</button>
    </div>

    <!-- ===== PANTALLA: REGISTRO ===== -->
    <div class="screen" id="screen-register">
      <button class="back-btn" onclick="goTo('screen-login')">
        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        Volver al login
      </button>
      <h2 class="screen-title">Crear cuenta</h2>
      <p class="screen-sub">Únete al sistema centralizado de gestión de proyectos.</p>

      <div class="field">
        <label>Nombre completo</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
          <input type="text" id="reg-name" placeholder="Juan García">
        </div>
      </div>
      <div class="field">
        <label>Correo electrónico</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
          <input type="email" id="reg-email" placeholder="tu@empresa.com">
        </div>
      </div>
      <div class="field">
        <label>Contraseña</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><rect x="3" y="11" width="18" height="11" rx="2" stroke-width="2"/><path d="M7 11V7a5 5 0 0110 0v4" stroke-width="2" stroke-linecap="round"/></svg>
          <input type="password" id="reg-pass" placeholder="Mínimo 8 caracteres" oninput="checkStrength(this.value)">
          <button class="toggle-pass" onclick="togglePass('reg-pass', this)" type="button">
            <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke-width="2"/></svg>
          </button>
        </div>
        <div class="pwd-strength">
          <div class="pwd-bar">
            <div class="pwd-seg" id="ps1"></div>
            <div class="pwd-seg" id="ps2"></div>
            <div class="pwd-seg" id="ps3"></div>
            <div class="pwd-seg" id="ps4"></div>
          </div>
          <div class="pwd-label" id="pwd-label">Escribe tu contraseña</div>
        </div>
      </div>
      <button class="btn-primary" style="margin-top:8px" onclick="handleRegister()">
        <span class="btn-text">Crear cuenta</span>
        <div class="spinner"></div>
      </button>
    </div>

    <!-- ===== PANTALLA: RECUPERAR - EMAIL ===== -->
    <div class="screen" id="screen-forgot-email">
      <button class="back-btn" onclick="goTo('screen-login')">
        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        Volver al login
      </button>
      <div class="steps">
        <div class="step active" id="step1"></div>
        <div class="step" id="step2"></div>
        <div class="step" id="step3"></div>
      </div>
      <h2 class="screen-title">Recuperar contraseña</h2>
      <p class="screen-sub">Ingresa tu correo registrado y te enviaremos un código de verificación.</p>

      <div class="field">
        <label>Correo electrónico</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
          <input type="email" id="forgot-email" placeholder="tu@empresa.com">
        </div>
        <div class="field-error" id="forgot-email-err">Por favor ingresa un correo válido.</div>
      </div>

      <button class="btn-primary" style="margin-top:8px" onclick="handleForgotEmail()">
        <span class="btn-text">Enviar código</span>
        <div class="spinner"></div>
      </button>
    </div>

    <!-- ===== PANTALLA: RECUPERAR - OTP ===== -->
    <div class="screen" id="screen-forgot-otp">
      <div class="steps">
        <div class="step done"></div>
        <div class="step active"></div>
        <div class="step"></div>
      </div>
      <h2 class="screen-title">Verificar código</h2>
      <p class="screen-sub">Ingresa el código de 6 dígitos que enviamos a <strong id="otp-email-display"></strong></p>

      <div class="otp-wrap">
        <input class="otp-input" maxlength="1" id="otp0" oninput="otpMove(this, 0)" onkeydown="otpBack(event, 0)">
        <input class="otp-input" maxlength="1" id="otp1" oninput="otpMove(this, 1)" onkeydown="otpBack(event, 1)">
        <input class="otp-input" maxlength="1" id="otp2" oninput="otpMove(this, 2)" onkeydown="otpBack(event, 2)">
        <input class="otp-input" maxlength="1" id="otp3" oninput="otpMove(this, 3)" onkeydown="otpBack(event, 3)">
        <input class="otp-input" maxlength="1" id="otp4" oninput="otpMove(this, 4)" onkeydown="otpBack(event, 4)">
        <input class="otp-input" maxlength="1" id="otp5" oninput="otpMove(this, 5)" onkeydown="otpBack(event, 5)">
      </div>

      <div class="alert alert-error" id="otp-error">
        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="8" x2="12" y2="12" stroke-width="2"/></svg>
        Código incorrecto. Intenta de nuevo.
      </div>

      <button class="btn-primary" onclick="handleOTP()">
        <span class="btn-text">Verificar código</span>
        <div class="spinner"></div>
      </button>

      <div class="resend">
        ¿No recibiste el código? <button onclick="resendOTP()">Reenviar</button>
      </div>
    </div>

    <!-- ===== PANTALLA: RECUPERAR - NUEVA CONTRASEÑA ===== -->
    <div class="screen" id="screen-new-pass">
      <div class="steps">
        <div class="step done"></div>
        <div class="step done"></div>
        <div class="step active"></div>
      </div>
      <h2 class="screen-title">Nueva contraseña</h2>
      <p class="screen-sub">Crea una contraseña segura para tu cuenta.</p>

      <div class="field">
        <label>Nueva contraseña</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><rect x="3" y="11" width="18" height="11" rx="2" stroke-width="2"/><path d="M7 11V7a5 5 0 0110 0v4" stroke-width="2" stroke-linecap="round"/></svg>
          <input type="password" id="new-pass" placeholder="Mínimo 8 caracteres" oninput="checkStrength2(this.value)">
          <button class="toggle-pass" onclick="togglePass('new-pass', this)" type="button">
            <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke-width="2"/></svg>
          </button>
        </div>
        <div class="pwd-strength">
          <div class="pwd-bar">
            <div class="pwd-seg" id="ps1b"></div>
            <div class="pwd-seg" id="ps2b"></div>
            <div class="pwd-seg" id="ps3b"></div>
            <div class="pwd-seg" id="ps4b"></div>
          </div>
          <div class="pwd-label" id="pwd-label2">Escribe tu contraseña</div>
        </div>
      </div>
      <div class="field">
        <label>Confirmar contraseña</label>
        <div class="input-wrap">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><rect x="3" y="11" width="18" height="11" rx="2" stroke-width="2"/><path d="M7 11V7a5 5 0 0110 0v4" stroke-width="2" stroke-linecap="round"/></svg>
          <input type="password" id="confirm-pass" placeholder="Repite la contraseña">
        </div>
        <div class="field-error show" id="match-err" style="display:none">Las contraseñas no coinciden.</div>
      </div>

      <button class="btn-primary" onclick="handleNewPass()">
        <span class="btn-text">Guardar contraseña</span>
        <div class="spinner"></div>
      </button>
    </div>

    <!-- ===== PANTALLA: ÉXITO ===== -->
    <div class="screen" id="screen-success">
      <div style="text-align:center; padding: 20px 0;">
        <div style="width:72px;height:72px;background:rgba(0,229,160,0.15);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;">
          <svg width="32" height="32" fill="none" viewBox="0 0 24 24" stroke="var(--accent)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"/></svg>
        </div>
        <h2 class="screen-title" style="text-align:center">¡Listo!</h2>
        <p class="screen-sub" style="text-align:center;margin-bottom:32px">Tu contraseña ha sido actualizada exitosamente. Ya puedes iniciar sesión.</p>
        <button class="btn-primary" onclick="goTo('screen-login')">
          <span class="btn-text">Ir al login</span>
          <div class="spinner"></div>
        </button>
      </div>
    </div>

  </div>
</div>

<script>
  // Navegación entre pantallas
  function goTo(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  // Toggle visibilidad contraseña
  function togglePass(inputId, btn) {
    const input = document.getElementById(inputId);
    const isPass = input.type === 'password';
    input.type = isPass ? 'text' : 'password';
    btn.innerHTML = isPass
      ? `<svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94" stroke-width="2" stroke-linecap="round"/><path d="M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19" stroke-width="2" stroke-linecap="round"/><line x1="1" y1="1" x2="23" y2="23" stroke-width="2" stroke-linecap="round"/></svg>`
      : `<svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke-width="2"/></svg>`;
  }

  // Simulación de carga
  function simulateLoad(btn, duration = 1500) {
    return new Promise(res => {
      btn.classList.add('loading');
      setTimeout(() => { btn.classList.remove('loading'); res(); }, duration);
    });
  }

  // LOGIN
  async function handleLogin() {
    const user = document.getElementById('login-user').value.trim();
    const pass = document.getElementById('login-pass').value;
    const err = document.getElementById('login-error');
    const uerr = document.getElementById('login-user-err');
    const perr = document.getElementById('login-pass-err');
    err.classList.remove('show'); uerr.classList.remove('show'); perr.classList.remove('show');
    let valid = true;
    if (!user) { uerr.classList.add('show'); valid = false; }
    if (!pass) { perr.classList.add('show'); valid = false; }
    if (!valid) return;
    const btn = event.currentTarget;
    await simulateLoad(btn);
    // Simulación: usuario demo/demo123
    if (user === 'admin' && pass === 'admin123') {
      document.getElementById('login-error-msg').textContent = '¡Acceso concedido! Redirigiendo...';
      err.className = 'alert alert-success show';
    } else {
      err.className = 'alert alert-error show';
      document.getElementById('login-error-msg').textContent = 'Credenciales incorrectas. Prueba: admin / admin123';
    }
  }

  // REGISTRO
  async function handleRegister() {
    const btn = event.currentTarget;
    await simulateLoad(btn);
    goTo('screen-login');
    setTimeout(() => {
      const err = document.getElementById('login-error');
      err.className = 'alert alert-success show';
      document.getElementById('login-error-msg').textContent = '✓ Cuenta creada. Ya puedes iniciar sesión.';
    }, 300);
  }

  // FORGOT - EMAIL
  async function handleForgotEmail() {
    const email = document.getElementById('forgot-email').value.trim();
    const err = document.getElementById('forgot-email-err');
    err.classList.remove('show');
    if (!email || !/\S+@\S+\.\S+/.test(email)) { err.classList.add('show'); return; }
    const btn = event.currentTarget;
    await simulateLoad(btn);
    document.getElementById('otp-email-display').textContent = email;
    goTo('screen-forgot-otp');
    document.getElementById('otp0').focus();
  }

  // OTP navigation
  function otpMove(input, index) {
    if (input.value.length === 1 && index < 5) {
      document.getElementById('otp' + (index + 1)).focus();
    }
  }
  function otpBack(e, index) {
    if (e.key === 'Backspace' && !e.target.value && index > 0) {
      document.getElementById('otp' + (index - 1)).focus();
    }
  }

  async function handleOTP() {
    const code = [0,1,2,3,4,5].map(i => document.getElementById('otp'+i).value).join('');
    const err = document.getElementById('otp-error');
    err.classList.remove('show');
    if (code.length < 6) { err.classList.add('show'); return; }
    const btn = event.currentTarget;
    await simulateLoad(btn);
    if (code === '123456') {
      goTo('screen-new-pass');
    } else {
      err.classList.add('show');
    }
  }

  function resendOTP() {
    [0,1,2,3,4,5].forEach(i => { const el = document.getElementById('otp'+i); el.value = ''; });
    document.getElementById('otp0').focus();
    alert('Código reenviado. (Demo: usa 123456)');
  }

  // NUEVA CONTRASEÑA
  async function handleNewPass() {
    const p1 = document.getElementById('new-pass').value;
    const p2 = document.getElementById('confirm-pass').value;
    const err = document.getElementById('match-err');
    err.style.display = 'none';
    if (p1 !== p2 || !p1) { err.style.display = 'block'; return; }
    const btn = event.currentTarget;
    await simulateLoad(btn);
    goTo('screen-success');
  }

  // Fortaleza contraseña
  function updateStrength(value, segs, label) {
    let score = 0;
    if (value.length >= 8) score++;
    if (/[A-Z]/.test(value)) score++;
    if (/[0-9]/.test(value)) score++;
    if (/[^A-Za-z0-9]/.test(value)) score++;
    const colors = ['#ff4d6d','#ffaa00','#00b4ff','#00e5a0'];
    const labels = ['Muy débil','Regular','Buena','Excelente'];
    segs.forEach((seg, i) => {
      seg.style.background = i < score ? colors[score-1] : 'var(--border)';
    });
    label.textContent = value ? labels[score-1] || 'Muy débil' : 'Escribe tu contraseña';
    label.style.color = value ? colors[score-1] : 'var(--muted)';
  }

  function checkStrength(v) {
    updateStrength(v,
      [document.getElementById('ps1'),document.getElementById('ps2'),document.getElementById('ps3'),document.getElementById('ps4')],
      document.getElementById('pwd-label')
    );
  }
  function checkStrength2(v) {
    updateStrength(v,
      [document.getElementById('ps1b'),document.getElementById('ps2b'),document.getElementById('ps3b'),document.getElementById('ps4b')],
      document.getElementById('pwd-label2')
    );
  }

  // Enter key support
  document.addEventListener('keydown', function(e) {
    if (e.key !== 'Enter') return;
    const active = document.querySelector('.screen.active');
    if (!active) return;
    const id = active.id;
    if (id === 'screen-login') handleLogin();
    if (id === 'screen-forgot-email') handleForgotEmail();
    if (id === 'screen-new-pass') handleNewPass();
  });
</script>
</body>
</html>
